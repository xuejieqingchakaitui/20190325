<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button id="but">按钮</button>
<script>
    // var str = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'
    // 索引范围 0 ~ (str.length - 1)

    // 随机整数公式 Math.round(Math.random() * (m - n) + n)
    // 生成随机验证码
    // 1.获的一个随机索引(随机整数) Math.round(Math.random() * (str.length - 1))
    // 2.根据随机的索引 找到对应的字符 拼接起来
    // 3.你传几 就生成几位的验证码 不传实参 默认生成四位的验证

    // 生成四位验证码 执行四次上面的步骤

    function createCode(len) {//len:是验证码位数
        // 如果没传参 就让len等于4 生成四位验证码
        // if (isNaN(len)) { // 如果返回true 说明不是数字
        //   len = 4
        // }

        // 函数的默认参数处理
        // 如果你给len传值 就以len的值为准 否则就默认4
        len = len || 4

        var str =
            "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        // 索引范围 0 ~ （str.length - 1）
         //准备一个空的字符串，将每次的循环字符串储存起来
        var codeStr = '';
        for (var i = 0; i < len; i++) {
            // 生成随机索引 0 ~ （str.length - 1）
            var ind = Math.round(Math.random() * (str.length - 1));

            // 根据随机索引ind 获取对应的字符
            var char = str[ind];

            // 将每一次获取到的字符 拼接起来
            codeStr += char // codeStr = codeStr + char
            // console.log('循环中', codeStr)
        }

        return codeStr//执行输出
    }

    // while(循环条件) {
    // 只要循环条件为true就一直循环下去
    // }

    function randomCode2(len) { // len验证码位数
        // 默认参数处理
        len = len || 4 // len 生成验证码长度

        var str = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

        var codeStr = ""; // 拼接验证码

        // 只要拼接的字符个数 不够 len个 就要继续循环下去
        while(codeStr.length < len) {
            var ind = Math.round(Math.random() * (str.length - 1));
            codeStr += str[ind];//得到生成范围的值

            // 如果拼接的字符串codeStr中 还没有这个字符char 我们再进行拼接
            var char = str[ind]
            if (codeStr.indexOf(char) === -1) {
                codeStr += char
            }
            console.log(codeStr, codeStr.length)
        }
        return codeStr
    }
var but = document.getElementById('but');
but.onclick=function () {
  this.innerHTML= randomCode2()
}
</script>
</body>
</html>